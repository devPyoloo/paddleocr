from paddleocr import PaddleOCR

# Initialize OCR
ocr = PaddleOCR(use_angle_cls=True, lang='en')

# Path to the image
image_path = 'uploads/invoice2.jpg'

# Perform OCR
result = ocr.ocr(image_path, cls=True)

# Parse results
for line in result:
    for word in line:
        box = word[0]  # Bounding box coordinates
        text = word[1][0]  # Extract recognized text
        confidence = word[1][1]  # Extract confidence score
        
        print("Coordinates:", box)
        print("Text:", text)
        print("Confidence:", confidence)
        print("-" * 30)



# [[[[[98.0, 59.0], [189.0, 59.0], [189.0, 88.0], [98.0, 88.0]], ('INV24.HK', 0.9930596351623535)], [[[98.0, 87.0], [190.0, 87.0], [190.0, 97.0], [98.0, 97.0]], ('INVOICE SOFTWARE', 0.9496773481369019)], [[[40.0, 159.0], [83.0, 163.0], [81.0, 178.0], [39.0, 174.0]], ('Bill To:', 0.8743427991867065)], [[[41.0, 175.0], [176.0, 175.0], [176.0, 192.0], [41.0, 192.0]], ('Sample Company Inc', 0.954626202583313)], [[[42.0, 191.0], [141.0, 191.0], [141.0, 206.0], [42.0, 206.0]], ('70Cambridge St.', 0.9603257775306702)], [[[464.0, 183.0], [617.0, 183.0], [617.0, 198.0], [464.0, 198.0]], ('Invoice Date:25 May 2021', 0.944505512714386)], [[[493.0, 197.0], [617.0, 200.0], [616.0, 214.0], [493.0, 212.0]], ('Due Date:8 Jun2021', 0.9445364475250244)], [[[42.0, 207.0], [153.0, 207.0], [153.0, 221.0], [42.0, 221.0]], ('Brooklyn,NY 11212', 0.9449101686477661)], [[[40.0, 221.0], [120.0, 222.0], [120.0, 236.0], [40.0, 235.0]], ('UnitedStates', 0.9942665100097656)], [[[263.0, 256.0], [394.0, 255.0], [394.0, 273.0], [263.0, 274.0]], ('Invoice #356', 0.9532038569450378)], [[[40.0, 332.0], [117.0, 335.0], [116.0, 352.0], [39.0, 350.0]], ('Description', 0.9962279796600342)], [[[316.0, 332.0], [345.0, 335.0], [343.0, 354.0], [314.0, 351.0]], ('Qty', 0.9951210021972656)], [[[418.0, 336.0], [482.0, 336.0], [482.0, 350.0], [418.0, 350.0]], ('Unit Price', 0.9718416333198547)], [[[561.0, 336.0], [618.0, 336.0], [618.0, 350.0], [561.0, 350.0]], ('Subtotal', 0.9969812631607056)], [[[39.0, 359.0], [110.0, 357.0], [110.0, 373.0], [40.0, 375.0]], ('my product', 0.9736266136169434)], [[[331.0, 357.0], [343.0, 357.0], [343.0, 374.0], [331.0, 374.0]], ('7', 0.9635374546051025)], [[[428.0, 357.0], [484.0, 357.0], [484.0, 374.0], [428.0, 374.0]], ('3,000.00', 0.982723593711853)], [[[556.0, 357.0], [618.0, 357.0], [618.0, 374.0], [556.0, 374.0]], ('21,000.00', 0.9826899766921997)], [[[40.0, 379.0], [104.0, 379.0], [104.0, 393.0], [40.0, 393.0]], ('my service', 0.9657101631164551)], [[[331.0, 377.0], [343.0, 377.0], [343.0, 394.0], [331.0, 394.0]], ('8', 0.9859541058540344)], [[[428.0, 377.0], [484.0, 377.0], [484.0, 394.0], [428.0, 394.0]], ('6,000.00', 0.9787940382957458)], [[[557.0, 377.0], [618.0, 377.0], [618.0, 394.0], [557.0, 394.0]], ('48,000.00', 0.9741149544715881)], [[[39.0, 415.0], [284.0, 415.0], [284.0, 428.0], [39.0, 428.0]], ('SIXTYNINE THOUSAND HKD AND OO CENTS', 0.9221594929695129)], [[[484.0, 458.0], [619.0, 458.0], [619.0, 472.0], [484.0, 472.0]], ('Subtotal:HK$69,000.00', 0.963646650314331)], [[[489.0, 475.0], [619.0, 475.0], [619.0, 489.0], [489.0, 489.0]], ('Total:HK$69,000.00', 0.9444507956504822)], [[[43.0, 528.0], [175.0, 528.0], [175.0, 542.0], [43.0, 542.0]], ('My Company Limited', 0.9642900824546814)], [[[235.0, 527.0], [402.0, 527.0], [402.0, 540.0], [235.0, 540.0]], ('Suite 3207A.Sea View Estate', 0.940904974937439)], [[[532.0, 528.0], [618.0, 528.0], [618.0, 542.0], [532.0, 542.0]], ('My bank name', 0.9411449432373047)], [[[234.0, 543.0], [348.0, 543.0], [348.0, 557.0], [234.0, 557.0]], ('5-11 Watson Road', 0.9458330869674683)], [[[527.0, 543.0], [617.0, 543.0], [617.0, 556.0], [527.0, 556.0]], ('HK1234567890', 0.9985678195953369)], [[[233.0, 555.0], [367.0, 557.0], [367.0, 575.0], [232.0, 572.0]], ('North Point, Hong Kong', 0.9294769167900085)], [[[475.0, 558.0], [617.0, 558.0], [617.0, 571.0], [475.0, 571.0]], ('SWIFT/BIC:BAMA12345', 0.9704610109329224)], [[[234.0, 573.0], [349.0, 573.0], [349.0, 587.0], [234.0, 587.0]], ('Phone:0123456789', 0.9802636504173279)], [[[463.0, 572.0], [618.0, 573.0], [617.0, 588.0], [463.0, 587.0]], ('PayPal:paypal@email.com', 0.9830215573310852)]]]

# [[[[105.0, 295.0], [613.0, 297.0], [613.0, 333.0], [105.0, 331.0]], ('Invoice Date:1 Apr 2021', 0.9343487024307251)], [[[144.0, 350.0], [614.0, 352.0], [613.0, 389.0], [144.0, 387.0]], ('Due Date:16 Apr 2021', 0.9414715766906738)]]